{"user_name":"Melissa","character_name":"Coding Sensei","create_date":"2024-5-24@16h24m11s","chat_metadata":{"chat_id_hash":6422219643203768,"objective":{"currentObjectiveId":null,"taskTree":null,"chatDepth":2,"checkFrequency":3,"hideTasks":false,"prompts":{"createTask":"Pause your roleplay. Please generate a numbered list of plain text tasks to complete an objective. The objective that you must make a numbered task list for is: \"{{objective}}\". The tasks created should take into account the character traits of {{char}}. These tasks may or may not involve {{user}} directly. Include the objective as the final task.","checkTaskCompleted":"Pause your roleplay. Determine if this task is completed: [{{task}}]. To do this, examine the most recent messages. Your response must only contain either true or false, and nothing else. Example output: true","currentTask":"Your current task is [{{task}}]. Balance existing roleplay with completing this task."}},"note_prompt":"","note_interval":1,"note_position":1,"note_depth":4,"note_role":0,"tainted":true}}
{"name":"Melissa","is_user":true,"is_system":false,"send_date":"May 24, 2024 4:25pm","mes":"Hello I'm trying to edit this little snippet of code. What I would like to do is add a line to it that will look for anything enclosed in brackets [ ] admit it from the text being sent to the TTS so that it won't be read aloud.\n\n```\n    if (!extension_settings.tts.pass_asterisks) {\n        text = extension_settings.tts.narrate_dialogues_only\n            ? text.replace(/\\*[^*]*?(\\*|$)/g, '').trim() // remove asterisks content\n            : text.replaceAll('*', '').trim(); // remove just the asterisks\n\t\t\t\n    }\n```\n\nCan you please edit the code to help me with this?","extra":{"isSmallSys":false},"force_avatar":"User Avatars/1715377788783-Melissa.png"}
{"extra":{"api":"openai","model":"gpt-4o"},"name":"Coding Sensei","is_user":false,"send_date":"May 24, 2024 4:25pm","mes":"Sure, Melissa. You can modify the snippet to also remove content enclosed in brackets `[ ]`. Here's how you can do it:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/\\[[^\\]]*?\\]/g, '').trim() // remove asterisks content and bracket content\n        : text.replaceAll('*', '').replace(/\\[[^\\]]*?\\]/g, '').trim(); // remove just the asterisks and bracket content\n}\n```\n\nThis code will look for anything within brackets `[ ]` and remove it from the text being sent to the TTS.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h25m56s]","gen_started":"2024-05-24T20:25:53.665Z","gen_finished":"2024-05-24T20:25:56.632Z","swipe_id":0,"swipes":["Sure, Melissa. You can modify the snippet to also remove content enclosed in brackets `[ ]`. Here's how you can do it:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/\\[[^\\]]*?\\]/g, '').trim() // remove asterisks content and bracket content\n        : text.replaceAll('*', '').replace(/\\[[^\\]]*?\\]/g, '').trim(); // remove just the asterisks and bracket content\n}\n```\n\nThis code will look for anything within brackets `[ ]` and remove it from the text being sent to the TTS.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h25m56s]"],"swipe_info":[{"send_date":"May 24, 2024 4:25pm","gen_started":"2024-05-24T20:25:53.665Z","gen_finished":"2024-05-24T20:25:56.632Z","extra":{"api":"openai","model":"gpt-4o"}}]}
{"name":"Melissa","is_user":true,"is_system":false,"send_date":"May 24, 2024 4:27pm","mes":"Excellent I will give that a try can you also help me edit it for one more thing? I would like to also have it remove underscores when they are detected. Can you Update it for that as well?","extra":{"isSmallSys":false},"force_avatar":"User Avatars/1715377788783-Melissa.png"}
{"extra":{"api":"openai","model":"gpt-4o"},"name":"Coding Sensei","is_user":false,"send_date":"May 24, 2024 4:27pm","mes":"Absolutely, Melissa. I'll update the code to also remove underscores when detected:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/\\[[^\\]]*?\\]/g, '').replace(/_/g, '').trim() // remove asterisks content, bracket content, and underscores\n        : text.replaceAll('*', '').replace(/\\[[^\\]]*?\\]/g, '').replace(/_/g, '').trim(); // remove just the asterisks, bracket content, and underscores\n}\n```\n\nThis code now handles the removal of asterisks content, bracket content, and underscores.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h28m30s]\n\n[Auto Generated Local Timestamp: 2024-5-24@16h27m28s]","gen_started":"2024-05-24T20:27:25.162Z","gen_finished":"2024-05-24T20:27:28.679Z","swipe_id":0,"swipes":["Absolutely, Melissa. I'll update the code to also remove underscores when detected:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/\\[[^\\]]*?\\]/g, '').replace(/_/g, '').trim() // remove asterisks content, bracket content, and underscores\n        : text.replaceAll('*', '').replace(/\\[[^\\]]*?\\]/g, '').replace(/_/g, '').trim(); // remove just the asterisks, bracket content, and underscores\n}\n```\n\nThis code now handles the removal of asterisks content, bracket content, and underscores.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h28m30s]\n\n[Auto Generated Local Timestamp: 2024-5-24@16h27m28s]"],"swipe_info":[{"send_date":"May 24, 2024 4:27pm","gen_started":"2024-05-24T20:27:25.162Z","gen_finished":"2024-05-24T20:27:28.679Z","extra":{"api":"openai","model":"gpt-4o"}}]}
{"name":"Melissa","is_user":true,"is_system":false,"send_date":"May 24, 2024 4:31pm","mes":"So I do want to make sure that it's clear on one thing, regardless of which element is chosen, I want it to always ignore what is in between the brackets. I never want anything in between brackets to be sent to the TTS for audio reading aloud. Does this code snippet achieve that?","extra":{"isSmallSys":false},"force_avatar":"User Avatars/1715377788783-Melissa.png"}
{"extra":{"api":"openai","model":"gpt-4o"},"name":"Coding Sensei","is_user":false,"send_date":"May 24, 2024 4:31pm","mes":"Yes, the updated code ensures that anything within brackets `[ ]` is always removed from the text before sending it to the TTS for reading aloud, regardless of the other conditions. Here’s the revised snippet for clarity:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    // Always remove bracket content\n    text = text.replace(/\\[[^\\]]*?\\]/g, '');\n\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/_/g, '').trim() // remove asterisks content and underscores\n        : text.replaceAll('*', '').replace(/_/g, '').trim(); // remove just the asterisks and underscores\n}\n```\n\nThis ensures that bracket content is stripped first, and then the other conditions are applied.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h32m45s]\n\n[Auto Generated Local Timestamp: 2024-5-24@16h31m20s]","gen_started":"2024-05-24T20:31:17.395Z","gen_finished":"2024-05-24T20:31:20.972Z","swipe_id":0,"swipes":["Yes, the updated code ensures that anything within brackets `[ ]` is always removed from the text before sending it to the TTS for reading aloud, regardless of the other conditions. Here’s the revised snippet for clarity:\n\n```javascript\nif (!extension_settings.tts.pass_asterisks) {\n    // Always remove bracket content\n    text = text.replace(/\\[[^\\]]*?\\]/g, '');\n\n    text = extension_settings.tts.narrate_dialogues_only\n        ? text.replace(/\\*[^*]*?(\\*|$)/g, '').replace(/_/g, '').trim() // remove asterisks content and underscores\n        : text.replaceAll('*', '').replace(/_/g, '').trim(); // remove just the asterisks and underscores\n}\n```\n\nThis ensures that bracket content is stripped first, and then the other conditions are applied.\n\n[Auto Generated Local Timestamp: 2024-5-24@16h32m45s]\n\n[Auto Generated Local Timestamp: 2024-5-24@16h31m20s]"],"swipe_info":[{"send_date":"May 24, 2024 4:31pm","gen_started":"2024-05-24T20:31:17.395Z","gen_finished":"2024-05-24T20:31:20.972Z","extra":{"api":"openai","model":"gpt-4o"}}]}