<div class="mgbfunctioncall_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>MGB Function Call</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="flex-container flexFlowColumn">
                <label class="checkbox_label" for="mgbfunctioncall_enabled">
                    <input type="checkbox" id="mgbfunctioncall_enabled" />
                    <span>Enabled</span>
                </label>
                <h4>Source</h4>
                <select id="mgbfunctioncall_source">
                    <option value="openaiapi">SerpApi</option>
                    <option value="extras">Extras API</option>
                    <option value="plugin">Selenium Plugin</option>
                </select>
                <div id="openaiapi_settings">
                    <div class="flex-container alignItemsBaseline">
                        <h4 for="openaiapi_key" class="flex1 margin0">
                            <a href="https://openaiapi.com/" target="_blank">SerpApi Key</a>
                        </h4>
                        <div id="openaiapi_key" class="menu_button menu_button_icon">
                            <i class="fa-solid fa-key"></i>
                            <span>Click to set</span>
                        </div>
                    </div>
                </div>
                <div id="mgbfunctioncall_extras_settings">
                    <label for="mgbfunctioncall_extras_engine">Engine</label>
                    <select id="mgbfunctioncall_extras_engine">
                        <option value="google">Google</option>
                        <option value="duckduckgo">DuckDuckGo</option>
                    </select>
                </div>
                <label for="mgbfunctioncall_cache_lifetime">Cache Lifetime <small>(seconds)</small></label>
                <input type="number" class="text_pole" id="mgbfunctioncall_cache_lifetime" value="">
                <hr>
                <h4>Prompt Settings</h4>
                <label for="mgbfunctioncall_budget">Prompt Budget <small>(text characters)</small></label>
                <input type="number" class="text_pole" id="mgbfunctioncall_budget" value="">
                <label for="mgbfunctioncall_template">Insertion Template</label>
                <textarea id="mgbfunctioncall_template" class="text_pole textarea_compact autoSetHeight" rows="2" placeholder="Use {{query}} and {{text}} macro."></textarea>
                <label for="mgbfunctioncall_position">Injection Position</label>
                <div class="radio_group">
                    <label>
                        <input type="radio" name="mgbfunctioncall_position" value="2" />
                        Before Main Prompt / Story String
                    </label>
                    <!--Keep these as 0 and 1 to interface with the setExtensionPrompt function-->
                    <label>
                        <input type="radio" name="mgbfunctioncall_position" value="0" />
                        After Main Prompt / Story String
                    </label>
                    <label>
                        <input type="radio" name="mgbfunctioncall_position" value="1" />
                        In-chat @ Depth <input id="mgbfunctioncall_depth" class="text_pole widthUnset" type="number" min="0" max="999" />
                    </label>
                <hr>
                <h4>Search Activation</h4>
                <label class="checkbox_label" for="mgbfunctioncall_use_backticks">
                    <input type="checkbox" id="mgbfunctioncall_use_backticks" />
                    <span>Use `Backticks`</span>
                </label>
                <label class="checkbox_label" for="mgbfunctioncall_use_trigger_phrases">
                    <input type="checkbox" id="mgbfunctioncall_use_trigger_phrases" />
                    <span>Use Trigger Phrases</span>
                </label>
                <label for="mgbfunctioncall_trigger_phrases_events">Trigger Phrases Events <small>(one per line)</small></label>
                <small>If a message starts with a period, it will be ignored.</small>
                <textarea id="mgbfunctioncall_trigger_phrases_events" class="text_pole textarea_compact" rows="4"></textarea>
				<label for="mgbfunctioncall_trigger_phrases_scheduleevent">Trigger Phrases Schedule Event <small>(one per line)</small></label>
                <small>If a message starts with a period, it will be ignored.</small>
                <textarea id="mgbfunctioncall_trigger_phrases_scheduleevent" class="text_pole textarea_compact" rows="4"></textarea>
				<label for="mgbfunctioncall_trigger_phrases_worktasks">Trigger Phrases Work Tasks<small>(one per line)</small></label>
                <small>If a message starts with a period, it will be ignored.</small>
                <textarea id="mgbfunctioncall_trigger_phrases_worktasks" class="text_pole textarea_compact" rows="4"></textarea>
				<label for="mgbfunctioncall_trigger_phrases_personaltasks">Trigger Phrases Personal Tasks<small>(one per line)</small></label>
                <small>If a message starts with a period, it will be ignored.</small>
                <textarea id="mgbfunctioncall_trigger_phrases_personaltasks" class="text_pole textarea_compact" rows="4"></textarea>
                <label for="mgbfunctioncall_max_words">Max Words <small>(per query)</small></label>
                <input type="number" class="text_pole" id="mgbfunctioncall_max_words" value="" min="1" max="32" step="1">
                <hr>
                <h4>Page Scraping</h4>
                <label class="checkbox_label" for="mgbfunctioncall_visit_enabled">
                    <input type="checkbox" id="mgbfunctioncall_visit_enabled" />
                    <span>Visit Links</span>
                </label>
                <div class="marginTopBot5">
                    Text will be extracted from the visited search result pages and saved to:
                </div>
                <label for="mgbfunctioncall_visit_target_message" class="checkbox_label">
                    <input id="mgbfunctioncall_visit_target_message" type="radio" name="mgbfunctioncall_visit_target" value="0" />
                    <span>Message attachment</span>
                </label>
                <label for="mgbfunctioncall_visit_target_databank" class="checkbox_label">
                    <input id="mgbfunctioncall_visit_target_databank" type="radio" name="mgbfunctioncall_visit_target" value="1" />
                    <span>Data Bank (chat)</span>
                </label>
                <label for="mgbfunctioncall_visit_count">Visit Count <small>(max per query)</small></label>
                <input type="number" class="text_pole" id="mgbfunctioncall_visit_count" value="" min="0" max="10" step="1">
                <label for="mgbfunctioncall_visit_blacklist">Visit Domain Blacklist <small>(one per line)</small></label>
                <textarea id="mgbfunctioncall_visit_blacklist" class="text_pole textarea_compact" rows="4"></textarea>
                <label for="mgbfunctioncall_file_header">File Header</label>
                <textarea id="mgbfunctioncall_file_header" class="text_pole textarea_compact autoSetHeight" rows="2" placeholder="Use &lcub;&lcub;query&rcub;&rcub; macro."></textarea>
                <label for="mgbfunctioncall_block_header">Block Header</label>
                <textarea id="mgbfunctioncall_block_header" class="text_pole textarea_compact autoSetHeight" rows="2" placeholder="Use &lcub;&lcub;link&rcub;&rcub; and &lcub;&lcub;text&rcub;&rcub; macros."></textarea>
                </div>
            </div>
        </div>
    </div>
</div>
